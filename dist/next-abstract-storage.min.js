!function(){var e=e||window||self||Function("return this")(),i=e.nx||require("next-js-core2");i.is||require("next-is");i.json||require("next-json");var t=i.declare("nx.AbstractStorage",{methods:{init:function(e){this.engine=e.engine,this.prefix=e.prefix||"",this.api={get:e.get||"getItem",set:e.set||"setItem",remove:e.remove||"removeItem",clear:e.clear||"clear",stringify:e.stringify||i.stringify}},set:function(e,t){var n=e.indexOf(".");if(n>-1){var s=e.slice(0,n),r=e.slice(n+1),h=this.get(s)||{};i.set(h,r,t),this.set(s,h)}else this.engine[this.api.set](this.__key(e),this.api.stringify(t))},sets:function(e){i.each(e,function(e,i){this.set(e,i)},this)},get:function(e){var t=e.indexOf(".");if(t>-1){var n=e.slice(0,t),s=e.slice(t+1),r=this.get(n)||{};return i.get(r,s)}var h=this.engine[this.api.get](this.__key(e));return i.parse(h)},gets:function(e){var t={},n=this.__keys(e);return i.each(n,function(e,i){t[i]=this.get(i)},this),t},clear:function(e){this.engine[this.api.remove](this.__key(e))},clears:function(e){var t=this.__keys(e);i.each(t,function(e,i){this.clear(i)},this)},empty:function(){this.engine[this.api.clear]()},keys:function(){return Object.keys(this.engine)},__key:function(e){var i=this.prefix;return i?[i,"@",e].join(""):e},__keys:function(e){var t,n,s=[];return i.isArray(e)?e:(n=this.keys(),t=this.prefix.length+1,i.each(n,function(e,i){this.prefix&&0===i.indexOf(this.prefix+"@")&&s.push(i.slice(t))},this),s.length?s:n)}}});"undefined"!=typeof module&&module.exports&&(module.exports=t)}();