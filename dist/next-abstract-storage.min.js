!function(){var e=e||window||self||Function("return this")(),t=e.nx||require("next-js-core2");t.is||require("next-is");t.json||require("next-json"),t.slice2str||require("next-slice2str");var i=t.declare("nx.AbstractStorage",{methods:{init:function(e){this.engine=e.engine,this.prefix=e.prefix||"",this.options=e,this.setAccessorApi()},setAccessorApi:function(){this.api={get:this.options.get||"getItem",set:this.options.set||"setItem",remove:this.options.remove||"removeItem",clear:this.options.clear||"clear"}},stringify:function(e){return t.stringify(e)},set:function(e,i){var s=e.indexOf(".");if(s>-1){var n=t.slice2str(e,s,1),r=this.get(n[0])||{};t.set(r,n[1],i),this.set(n[0],r)}else this.engine[this.api.set](this.__key(e),this.stringify(i))},sets:function(e){t.each(e,function(e,t){this.set(e,t)},this)},get:function(e){var i=e.indexOf(".");if(i>-1){var s=t.slice2str(e,i,1),n=this.get(s[0])||{};return t.get(n,s[1])}var r=this.engine[this.api.get](this.__key(e));return t.parse(r)},gets:function(e){var i={},s=this.__keys(e);return t.each(s,function(e,t){i[t]=this.get(t)},this),i},clear:function(e){this.engine[this.api.remove](this.__key(e))},clears:function(e){var i=this.__keys(e);t.each(i,function(e,t){this.clear(t)},this)},empty:function(){this.engine[this.api.clear]()},keys:function(){return Object.keys(this.engine)},__key:function(e){var t=this.prefix;return t?[t,"@",e].join(""):e},__keys:function(e){var i,s,n=[];return t.isArray(e)?e:(s=this.keys(),i=this.prefix.length+1,t.each(s,function(e,t){this.prefix&&0===t.indexOf(this.prefix+"@")&&n.push(t.slice(i))},this),n.length?n:s)}}});"undefined"!=typeof module&&module.exports&&(module.exports=i)}();