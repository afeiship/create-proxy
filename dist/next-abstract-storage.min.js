!function(){var e=e||this,t=e.nx||require("next-js-core2");t.is||require("next-is"),t.json||require("next-json");var i=t.declare("nx.AbstractStorage",{methods:{init:function(e){this.engine=e.engine,this.prefix=e.prefix||"",this.api={get:e.get||"getItem",set:e.set||"setItem",remove:e.remove||"removeItem",clear:e.clear||"clear"}},set:function(e,i){this.engine[this.api.set](this.__key(e),t.stringify(i))},sets:function(e){t.each(e,function(e,t){this.set(e,t)},this)},get:function(e){var i=this.engine[this.api.get](this.__key(e));return t.parse(i)},gets:function(e){var i={},n=this.__keys(e);return t.each(n,function(e,t){i[t]=this.get(t)},this),i},clear:function(e){this.engine[this.api.remove](this.__key(e))},clears:function(e){var i=this.__keys(e);t.each(i,function(e,t){this.clear(t)},this)},empty:function(){this.engine[this.api.clear]()},keys:function(){return Object.keys(this.engine)},__key:function(e){var t=this.prefix;return t?[t,".",e].join(""):e},__keys:function(e){var i,n,s=(this.engine,[]);return t.isArray(e)?e:(n=this.keys(),i=this.prefix.length+1,t.each(n,function(e,t){this.prefix&&0===t.indexOf(this.prefix+".")&&s.push(t.slice(i))},this),s.length?s:n)}}});"undefined"!=typeof module&&module.exports&&(module.exports=i)}();